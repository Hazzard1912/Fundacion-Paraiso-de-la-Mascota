---
import Layout from "../layouts/Layout.astro";
import { actions } from "astro:actions";
import PetListing from "../components/PetListing";
export const prerender = false;

// Get all pets regardless of filters - we'll filter on client side
const { data, error } = await Astro.callAction(actions.getPetsForAdoption, {});

if (error) {
    console.error(error);
}

const pets = data?.data?.pets || [];

const filters = {
    especie: ["perro", "gato"],
    tamaño: ["pequeño", "mediano", "grande"],
    edad: ["cachorro", "joven", "adulto", "senior"],
    sexo: ["macho", "hembra"],
};
---

<Layout 
	title="Mascotas en Adopción - Fundación Paraíso de la Mascota Cali"
	description="Conoce a todos nuestros perros y gatos disponibles para adopción en Cali. Filtra por especie, tamaño, edad y encuentra a tu compañero perfecto. ¡Adopta y cambia una vida!"
	keywords="mascotas adopción Cali, perros adopción, gatos adopción, adopción responsable Colombia, mascotas disponibles, refugio animal Cali, adopción mascotas"
	ogTitle="Mascotas en Adopción - Fundación Paraíso de la Mascota"
	ogDescription="Perros y gatos buscando hogar en Cali. ¡Encuentra a tu compañero perfecto!"
>
    <!-- Hero institucional y SEO -->
    <section class="relative bg-gradient-to-br from-amber-900 to-amber-700 text-white py-24">
        <div class="relative max-w-6xl mx-auto px-4 text-center">
            <h1 class="text-5xl md:text-6xl font-bold mb-6 animate-fade-in">
                Adopta, Cambia una Vida y Transforma la Tuya
            </h1>
            <p class="text-xl text-amber-50 max-w-3xl mx-auto leading-relaxed mb-8">
                En la <strong>Fundación Paraíso de la Mascota</strong> llevamos más de 20 años rescatando, rehabilitando y buscando hogares responsables para perros y gatos en situación de vulnerabilidad en Cali, Colombia. Aquí puedes conocer a todos nuestros peludos listos para adopción y darles una segunda oportunidad.
            </p>
            <div class="flex flex-wrap gap-4 justify-center mb-4">
                <div class="bg-white/10 backdrop-blur-sm px-6 py-3 rounded-full">
                    <span class="text-2xl font-bold">300+</span>
                    <span class="text-amber-100 ml-2">Animales rescatados</span>
                </div>
                <div class="bg-white/10 backdrop-blur-sm px-6 py-3 rounded-full">
                    <span class="text-2xl font-bold">20+</span>
                    <span class="text-amber-100 ml-2">Años de experiencia</span>
                </div>
            </div>
            <p class="mt-6 text-amber-100 text-lg">
                <a href="/#historia" class="underline hover:text-amber-300">Conoce nuestra historia</a> &nbsp;|&nbsp;
                <a href="/apadrina" class="underline hover:text-amber-300">¿Prefieres apadrinar?</a>
            </p>
        </div>
    </section>

    <!-- Listado de mascotas -->
    <div class="max-w-6xl mx-auto px-4 py-16">
        <h2 class="text-3xl font-bold text-amber-900 mb-8 text-center">Mascotas disponibles para adopción</h2>
        <!-- React component for interactive filtering -->
        <PetListing client:load initialPets={pets} filters={filters} />
    </div>
</Layout>
