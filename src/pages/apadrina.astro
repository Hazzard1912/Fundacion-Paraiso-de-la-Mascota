---
import Layout from "../layouts/Layout.astro";
import { actions } from "astro:actions";
export const prerender = false;

// Obtener todas las mascotas
const { data, error } = await Astro.callAction(actions.getPetsForAdoption, {});

if (error) {
    console.error(error);
}

const pets = data?.data?.pets || [];
const filters = {
    especie: ["perro", "gato"],
    tamaño: ["pequeño", "mediano", "grande"],
    edad: ["cachorro", "joven", "adulto", "senior"],
    sexo: ["macho", "hembra"],
};
---

<Layout title="Apadrina una vida - Paraíso de la mascota Cali">
    <section class="relative bg-gradient-to-br from-amber-900 to-amber-700 text-white py-32">
        <div class="relative max-w-6xl mx-auto px-4">
            <h1 class="text-5xl md:text-6xl font-bold mb-6 animate-fade-in">
                Apadrina y Transforma Vidas
            </h1>
            <p class="text-xl text-amber-50 max-w-2xl leading-relaxed">
                Tu apoyo mensual permite que nuestros peludos reciban los cuidados y el amor que necesitan mientras esperan un hogar definitivo. ¡Conviértete en padrino y haz la diferencia hoy!
            </p>
        </div>
    </section>

    <div class="max-w-6xl mx-auto px-4 py-16">
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-12">
            <h2 class="text-2xl font-semibold mb-6 text-amber-900">
                ¿En qué consiste el apadrinamiento?
            </h2>
            <ul class="list-disc pl-6 space-y-2 text-gray-700">
                <li>Un aporte económico mensual que puedes elegir según tus posibilidades.</li>
                <li>Podrás visitar a tu ahijado/a en los horarios establecidos.</li>
                <li>Contribuirás a su socialización y bienestar emocional.</li>
                <li>Recibirás actualizaciones periódicas sobre su evolución.</li>
            </ul>
            <div class="mt-6 bg-amber-100/50 p-4 rounded-lg border border-amber-200">
                <p class="italic text-amber-900">
                    "Tu generosidad es invaluable para la Fundación y para cada animalito rescatado. ¡Gracias por ser parte del cambio!"
                </p>
            </div>
        </div>

        <h2 class="text-3xl font-bold text-amber-900 mb-8 text-center">Elige a tu ahijado/a</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {pets.map((pet) => (
                <a
                    key={pet.documentId}
                    href={`/mascotas/${pet.documentId}/apadrinar`}
                    class="group transition-all duration-300 transform hover:-translate-y-1"
                >
                    <div class="bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300">
                        <div class="relative h-64 overflow-hidden">
                            <img
                                src={pet.imageUrl}
                                alt={pet.name}
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                                loading="lazy"
                            />
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
                                <h3 class="text-white text-xl font-semibold">{pet.name}</h3>
                                <p class="text-amber-200 text-sm">{pet.ageGroup} · {pet.species}</p>
                            </div>
                        </div>
                        <div class="p-4">
                            <p class="text-gray-600 line-clamp-2">{pet.description || "Sin descripción"}</p>
                            <div class="mt-4 flex items-center justify-between">
                                <span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm font-medium">
                                    {pet.size}
                                </span>
                                <span class="text-amber-600 font-medium text-sm">Apadrinar →</span>
                            </div>
                        </div>
                    </div>
                </a>
            ))}
        </div>
        {pets.length === 0 && (
            <div class="text-center py-12">
                <p class="text-xl text-gray-600">No hay mascotas disponibles para apadrinar en este momento.</p>
            </div>
        )}
    </div>
</Layout> 